# GithubModUpdateCheckerConsole

## これはなに？
GithubでリリースされているBeat SaberのModの最新版を自動取得してダウンロードしてくれるツール。<br>

## 使い方
リリースのzipファイルを解凍して使ってください。<br>
.NET 6が必要です。<br>
初回実行時は、初期設定をしてください。

初期設定には、ビートセイバーのフォルダパスとGitHubのPersonal access tokenが必要です。<br>
GitHubのPersonal access tokenは、GitHubのアカウントを作成の上、Settings->Developer settings->Personal access tokensから生成してください。<br>

もし設定を変えたくなったら、config.jsonを直接書き換えてください。

次にPluginsにダウンロードしているModの情報を入力していきます。<br>
ここで、GitHubのリポジトリのURLを入力するのですが、例えばNalulunaさんのModのようにもしGitHubのURLが無ければ、"p"と入力してください。<br>
"p"と入力されたModについてはGitHubでの検索・ダウンロードをしません。<br>
また、URLが分からずGoogle検索をしたい場合は、"s"と入力すれば、自動的にModのファイル名でGoogle検索してくれます。

オリジナルのModかどうかの入力も必要ですが、これは後々ModAssistantに追加されたときに、Mod管理をModAssistantに切り替えるかどうかの判断で使います。<br>
オリジナルのModとして登録した場合は、ModAssistantに追加されたときに、自動的にMod管理をModAssistantに任せるようになり、このツールでは管理できなくなります。<br>
逆にオリジナルの改造Modとして登録した場合は、ModAssistantに同名のModが追加されても無視して、引き続きこのツールで管理できます。<br>

ここで入力したMod情報を変更したい場合は、DataフォルダのGithubModData.csvやModAssistantModData.csvを直接変更してください。<br>

初期設定後は、バックアップが作成されます。<br>
バックアップされるのは、ビートセイバーフォルダのPluginsフォルダ、Dataフォルダとconfig.jsonです。<br>
Dataフォルダのバックアップは、ビートセイバーのバージョンアップ後すぐに後述する通常アップデートを行ってしまった場合にデータを戻す用途などを想定しています。

次に、モードを選択することになります。

### 通常アップデートチェック
これは、自動的に、PluginsフォルダのModの最新版がないか検索し、最新版があればダウンロードしてBeat Saberフォルダ内に配置するものです。<br>

初回の実行以降は、ModAssistantへのModの追加やローカルのModの増減を検知して、変更があった分の入力が求められます。

ローカルのModのバージョンはメタデータから取ってきているので、メタデータを変更し忘れているModのバージョンは正確に取得できません。<br>
そういったModは、アップデートしたはずなのに、最新版がGithubにあると出てくるので注意してください。<br>

Modのダウンロードがあった場合、一応ModsTempにもダウンロードしたModのデータがありますが、ここのデータは次回実行時に削除されます。

このモードは、PluginsにあるModのデータしか残さないようになるので、ビートセイバーのアップデート後にModがある程度出揃ってきてから使ってください。<br>
ビートセイバーのバージョンアップ後にModが出そろってない場合には、次のBSアップデート後のアップデートチェックモードをお使いください。

### BSアップデート後のアップデートチェック

このモードでは、アップデート前のバージョンから通常アップデートを使っていることが前提になります。<br>
Old 〇.〇.〇 PluginsフォルダにあるModで通常アップデートでGithubModとして登録されているModの最新リリースを探してきて、ダウンロードし、Pluginsフォルダに配置します。<br>
一度ダウンロードしたModでも再び更新された場合、このモードでアップデートすることができます。

ModAssistantのデータの処理等はしていないので、基本的にModが出そろってきたら、通常アップデートに切り替えてください。


### csvからダウンロード
これは、アップデートチェックで作成された、GithubModData.csvに記述されているModの最新版をダウンロードするモードです。<br>
他人のMod環境を再現するといった用途を想定しています。

このモードを使う場合は、GithubModData.csvをImportGithubCsvフォルダに入れてください。<br>
ダウンロード先はModsTempフォルダなので、次回実行時には削除されてしまうので注意してください。<br>
また、このモードではビートセイバーフォルダにはModはコピーされません。<br>
もし、ビートセイバーフォルダに反映したい場合は、ModsTemp内のフォルダをすべてビートセイバーフォルダにドラッグ＆ドロップして上書き保存してください。
