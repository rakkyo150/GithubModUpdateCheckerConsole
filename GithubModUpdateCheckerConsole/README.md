# GithubModUpdateCheckerConsole

## これはなに？
GithubでリリースされているBeat SaberのModの最新版を自動取得してダウンロードしてくれるツール。<br>

## 使い方
リリースのzipファイルを解凍して使ってください。<br>
.NET 6が必要です。<br>
初回実行時は、初期設定をしてください。

初期設定には、ビートセイバーのフォルダパスとGitHubのPersonal access tokenが必要です。<br>
GitHubのPersonal access tokenは、GitHubのアカウントを作成の上、Settings->Developer settings->Personal access tokensから生成してください。<br>

もし設定を変えたくなったら、config.jsonを直接書き換えてください。

次にPluginsにダウンロードしているModの情報を入力していきます。<br>
ここで、GitHubのリポジトリのURLを入力するのですが、例えばNalulunaさんのModのようにもしGitHubのURLが無ければ、"p"と入力してください。<br>
"p"と入力されたModについてはGitHubでの検索・ダウンロードをしません。<br>
また、URLが分からずGoogle検索をしたい場合は、"s"と入力すれば、自動的にModのファイル名でGoogle検索してくれます。

オリジナルのModかどうかの入力も必要ですが、これは後々ModAssistantに追加されたときに、Mod管理をModAssistantに切り替えるかどうかの判断で使います。<br>
オリジナルのModとして登録した場合は、ModAssistantに追加されたときに、自動的にMod管理をModAssistantに任せるようになり、このツールでは管理できなくなります。<br>
逆にオリジナルの改造Modとして登録した場合は、ModAssistantに同名のModが追加されても無視しして、引き続きこのツールで管理できます。<br>

ここで入力したMod情報を変更したい場合は、DataフォルダのGithubModData.csvやModAssistantModData.csvを直接変更してください。<br>

初期設定後は、バックアップが作成されます。<br>
バックアップされるのは、ビートセイバーフォルダのPluginsフォルダ、Dataフォルダとconfig.jsonです。
Dataフォルダのバックアップは、ビートセイバーのバージョンアップ後にある程度前のMod環境が戻ってきたけど、もう一度Modの情報を入力するのが面倒になってきたときに、Dataフォルダを上書きすると楽かも？<br>

次に、モードを選択することになります。

### アップデートチェック
これは、自動的に、ローカルのModの最新版がないか検索し、最新版があればダウンロードしてBeat Saberフォルダ内に配置するものです。<br>

初回の実行以降は、ModAssistantへのModの追加やローカルのModの増減を検知して、変更があった分の入力が求められます。

ローカルのModのバージョンはメタデータから取ってきているので、メタデータを変更し忘れているModのバージョンは正確に取得できません。
そういったModは、アップデートしたはずなのに、最新版がGithubにあると出てくるので注意してください。<br>

Modのダウンロードがあった場合、一応ModsTempにもダウンロードしたModのデータがありますが、ここのデータは次回実行時に削除されます。

また、ビートセイバーのアップデートがあった場合は、ある程度前のModの環境に戻ってきてからこのモードを使用してください。<br>
DataフォルダのデータがビートセイバーのModの状況と同期されるので、もう一度URLなどを入力する必要が出てきてしまいます。<br>
もし、Modが少ない状態でこのモードを実行してしまっても、バックアップから復元できるので、耐えはします。

### csvからダウンロード
これは、アップデートチェックで作成された、GithubModData.csvに記述されているModの最新版をダウンロードするモードです。<br>
他人のMod環境を再現するといった用途を想定しています。

このモードを使う場合は、GithubModData.csvをImportGithubCsvフォルダに入れてください。<br>
ダウンロード先はModsTempフォルダなので、次回実行時には削除されてしまうので注意してください。<br>
また、このモードではビートセイバーフォルダにはModはコピーされません。<br>
もし、ビートセイバーフォルダに反映したい場合は、ModsTemp内のフォルダをすべてビートセイバーフォルダにドラッグ＆ドロップして上書き保存してください。
